import{_ as a,o as n,c as l,a as p}from"./app.7c722b35.js";const F=JSON.parse('{"title":"Vue打包文件浏览器存在缓存问题","description":"","frontmatter":{},"headers":[{"level":2,"title":"vue-cli","slug":"vue-cli","link":"#vue-cli","children":[]},{"level":2,"title":"Vue打包文件浏览器存在缓存问题","slug":"vue打包文件浏览器存在缓存问题-1","link":"#vue打包文件浏览器存在缓存问题-1","children":[]}],"relativePath":"vue/README.md"}'),e={name:"vue/README.md"};function o(t,s,c,r,D,i){return n(),l("div",null,s[0]||(s[0]=[p(`<h1 id="vue打包文件浏览器存在缓存问题" tabindex="-1">Vue打包文件浏览器存在缓存问题 <a class="header-anchor" href="#vue打包文件浏览器存在缓存问题" aria-hidden="true">#</a></h1><ul><li><a href="https://www.jianshu.com/p/302b0bd9abb2" target="_blank" rel="noreferrer">https://www.jianshu.com/p/302b0bd9abb2</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUxNjQ1NjMwNw==&amp;action=getalbum&amp;album_id=1619085427984957440&amp;scene=173&amp;from_msgid=2247484034&amp;from_itemidx=1&amp;count=3&amp;nolastread=1#wechat_redirect" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUxNjQ1NjMwNw==&amp;action=getalbum&amp;album_id=1619085427984957440&amp;scene=173&amp;from_msgid=2247484034&amp;from_itemidx=1&amp;count=3&amp;nolastread=1#wechat_redirect</a></li><li><a href="https://www.bilibili.com/video/BV1Tf4y1L7YH?from=search&amp;seid=4625895786093377797&amp;spm_id_from=333.337.0.0" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1Tf4y1L7YH?from=search&amp;seid=4625895786093377797&amp;spm_id_from=333.337.0.0</a></li></ul><h2 id="vue-cli" tabindex="-1">vue-cli <a class="header-anchor" href="#vue-cli" aria-hidden="true">#</a></h2><ul><li>优化 <a href="https://blog.csdn.net/qq_21567385/article/details/107634781?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_21567385/article/details/107634781?utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link</a></li><li>Vue-Cli 2和3是不能并存的，至少不能同时安装，只能保留一个，在保留3的前提下还想用vue init怎么办？</li><li>卸载你的Vue-Cli 2：npm uninstall vue-cli -g或yarn global remove vue-cli</li><li>安装Vue-Cli 3：npm install -g @vue/cli或yarn global add @vue/cli</li><li>安装一个包：npm install -g @vue/cli-init或yarn global add @vue/cli-init</li></ul><h2 id="vue打包文件浏览器存在缓存问题-1" tabindex="-1">Vue打包文件浏览器存在缓存问题 <a class="header-anchor" href="#vue打包文件浏览器存在缓存问题-1" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">//修改配置文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> Timestamp </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTime</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">//当前时间为了防止打包缓存不刷新，所以给每个js文件都加一个时间戳</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 输出重构打包后的css文件</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">extract</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//打包后的css带版本号，不改变文件名</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// filename: &#39;css/[name].css?v=&#39; + Timestamp,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// chunkFilename : &#39;css/[name].css?v=&#39; + Timestamp</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//打包后的css带版本号,文件名会改变</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">css/[name].[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> Timestamp </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">].css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">chunkFilename</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">css/[name].[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> Timestamp </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">].css</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">configureWebpack</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 输出重构  打包编译后的 文件名称  【模块名称.时间戳】</span></span>
<span class="line"><span style="color:#BABED8;">            </span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">[name].</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">env</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">VUE_APP_CURRENTMODE</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">Timestamp</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">.js</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            </span><span style="color:#F07178;">chunkFilename</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">[name].</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">process</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">env</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">VUE_APP_CURRENTMODE</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">Timestamp</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">.js</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//p<wbr>rocess.env.VUE_APP_CURRENTMODE获取.env文件中的配置</span></span>
<span class="line"><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">env文件配置</span></span>
<span class="line"><span style="color:#BABED8;">NODE_ENV</span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;">production</span></span>
<span class="line"><span style="color:#BABED8;">VUE_APP_CURRENTMODE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prd</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//package.json文件配置</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue-cli-service build --mode prd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">1、当对一个表格的数据进行删除的时候，当获取到新的数据时，</span></span>
<span class="line"><span style="color:#babed8;">此时加一个判断，当请求结束时，如果当前的页数大于总页数，那么将当前页等于总页数并重新请求数据（主要看后端怎么处理如果后端返回的是最后一页的数据并且有数据那么就不用重新请求数据），如果当前页小于等于总页数，那么当前页不做改变。</span></span></code></pre></div>`,7)]))}const m=a(e,[["render",o]]);export{F as __pageData,m as default};
